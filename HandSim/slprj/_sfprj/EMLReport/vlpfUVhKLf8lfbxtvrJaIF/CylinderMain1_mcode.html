<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1">  1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type0" id="S2T0U3">Acce</span>,<span class="var type1" id="S3T1U4">Pos</span>,<span class="var type0" id="S4T0U5">ForceReactIndex</span>,<span class="var type0" id="S5T0U6">ForceReactThumb</span>] = CylinderMain(<span class="var type1" id="S6T2U9">IndexFext</span>,<span class="var type1" id="S7T3U10">ThumbFext</span>,<span class="var type1" id="S8T2U11">CollisionCondition</span>,<span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2">  2</a></span><span class="line">                                                                   <span class="var type1" id="S9T2U12">CollisionPosition</span>,<span class="var type1" id="S10T2U13">xDotG3</span>,<span class="var type1" id="S11T2U14">yDotG3</span>,<span class="var type1" id="S12T2U15">angleDot</span><span class="keyword">...</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3">  3</a></span><span class="line">                                                                   ,<span class="var type1" id="S13T2U16">xPositionG3</span>,<span class="var type1" id="S14T2U17">yPositionG3</span>,<span class="var type1" id="S15T2U18">angle</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4">  4</a></span><span class="line"><span class="comment">%   global variables parameters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5">  5</a></span><span class="line">    <span class="keyword">global</span> <span class="var type0" id="S16T0U20">R</span> <span class="var type0" id="S17T0U21">M</span> <span class="var type0" id="S18T0U22">g</span> <span class="var type0" id="S19T0U23">Us</span> <span class="var type0" id="S20T0U24">Uk</span> <span class="var type0" id="S21T0U25">Urs</span> <span class="var type0" id="S22T0U26">Urk</span> <span class="var type0" id="S23T0U27">Ucs</span> <span class="var type0" id="S24T0U28">Uck</span> <span class="var type0" id="S25T0U29">Iz</span> <span class="var type0" id="S26T0U30">F_s_x</span> <span class="var type0" id="S27T0U31">F_s_y</span> <span class="var type0" id="S28T0U32">F_k_x</span> <span class="var type0" id="S29T0U33">F_k_y</span> <span class="var type0" id="S30T0U34">T_s</span> <span class="var type0" id="S31T0U35">T_k</span> <span class="var type0" id="S32T0U36">Position_o_G3</span> <span class="var type0" id="S33T0U37">Position_G3_P3_frame_cylinder</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6">  6</a></span><span class="line">    <span class="var type1" id="S16T2U39">R</span>;<span class="comment">%Radius of the cylindrical ect in meters</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7">  7</a></span><span class="line">    <span class="var type1" id="S17T2U41">M</span>;<span class="comment">%Mass of the ect in Kg</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8">  8</a></span><span class="line">    <span class="var type1" id="S18T2U43">g</span>;<span class="comment">%Acceleration of gravity in m/s^2</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9">  9</a></span><span class="line">    <span class="var type1" id="S19T2U45">Us</span>;<span class="comment">%Static coefficient of friction</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10"> 10</a></span><span class="line">    <span class="var type1" id="S20T2U47">Uk</span>;<span class="comment">%Kinetic coefficient of friction</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11"> 11</a></span><span class="line">    <span class="var type1" id="S21T2U49">Urs</span>;<span class="comment">%Static rotational coefficient of friction</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12"> 12</a></span><span class="line">    <span class="var type1" id="S22T2U51">Urk</span>;<span class="comment">%Kinetic rotational coefficient of friction</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,13" id="srcline13"> 13</a></span><span class="line">    <span class="var type1" id="S23T2U53">Ucs</span>;<span class="comment">%Static contact coefficient of friction</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,14" id="srcline14"> 14</a></span><span class="line">    <span class="var type1" id="S24T2U55">Uck</span>;<span class="comment">%Kinetic contact coefficient of friction</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,15" id="srcline15"> 15</a></span><span class="line">    <span class="var type1" id="S25T2U57">Iz</span>;<span class="comment">%Inertia of the cylindrical ect in Z</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,16" id="srcline16"> 16</a></span><span class="line">    <span class="var type1" id="S26T2U59">F_s_x</span>;<span class="comment">%Static friction force in X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,17" id="srcline17"> 17</a></span><span class="line">    <span class="var type1" id="S27T2U61">F_s_y</span>;<span class="comment">%Static friction force in Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,18" id="srcline18"> 18</a></span><span class="line">    <span class="var type1" id="S28T2U63">F_k_x</span>;<span class="comment">%Kinetic friction force in X</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,19" id="srcline19"> 19</a></span><span class="line">    <span class="var type1" id="S29T2U65">F_k_y</span>;<span class="comment">%Kinetic friction force in Y</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,20" id="srcline20"> 20</a></span><span class="line">    <span class="var type1" id="S30T2U67">T_s</span>;<span class="comment">%Static friction torque see derivation notes to verify the expression</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,21" id="srcline21"> 21</a></span><span class="line">    <span class="var type1" id="S31T2U69">T_k</span>;<span class="comment">%Kinetic friction torque see derivation notes to verify the expression</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,22" id="srcline22"> 22</a></span><span class="line">    <span class="var type1" id="S32T3U71">Position_o_G3</span>;<span class="comment">%Position from frame 0 to the centre of gravity of the cylinder</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,23" id="srcline23"> 23</a></span><span class="line">    <span class="var type1" id="S33T3U73">Position_G3_P3_frame_cylinder</span>;<span class="comment">%Position to second point of the cylinder</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,24" id="srcline24"> 24</a></span><span class="line">    <span class="mxinfo " id="T4:U30"><span class="var type1" id="S34T4U76">CollisionIndexForce</span>=<span class="mxinfo " id="T4:U32"><span class="fcn" id="F2N3:B78">CollisionConditionFunct</span>(<span class="var type1" id="S8T2U80">CollisionCondition</span>(1),<span class="var type1" id="S6T2U82">IndexFext</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,25" id="srcline25"> 25</a></span><span class="line">    <span class="var type0" id="S36T0U85">CollisionThumbForce</span>=CollisionConditionFunct(<span class="var type1" id="S8T2U89">CollisionCondition</span>(<span class="mxinfo " id="T2:U36"><span class="message error" id="M1F1C">2</span></span>),<span class="var type0" id="S7T0U91">ThumbFext</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,26" id="srcline26"> 26</a></span><span class="line">    <span class="var type0" id="S37T0U94">GenCordExt</span>=ForcesCalculator(<span class="var type1" id="S34T4U97">CollisionIndexForce</span>,<span class="var type0" id="S36T0U98"><span class="message error" id="M2F1C">CollisionThumbForce</span></span>,<span class="var type0" id="S9T0U99">CollisionPosition</span>,<span class="var type0" id="S13T0U100">xPositionG3</span>,<span class="var type0" id="S14T0U101">yPositionG3</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,27" id="srcline27"> 27</a></span><span class="line">    <span class="var type0" id="S39T0U104">GeneralCoordinatesDoubleDot</span> = Equation_Of_Motion(<span class="var type0" id="S37T0U107"><span class="message error" id="M3F1C">GenCordExt</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,28" id="srcline28"> 28</a></span><span class="line">    <span class="var type0" id="S41T0U110">ForceReactionIndex</span>=ForceReactionFinger(<span class="var type0" id="S39T0U113"><span class="message error" id="M4F1C">GeneralCoordinatesDoubleDot</span></span>,<span class="var type0" id="S34T0U114">CollisionIndexForce</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,29" id="srcline29"> 29</a></span><span class="line">    <span class="var type0" id="S43T0U117">ForceReactionThumb</span>=ForceReactionFinger(<span class="var type0" id="S39T0U120"><span class="message error" id="M5F1C">GeneralCoordinatesDoubleDot</span></span>,<span class="var type0" id="S36T0U121">CollisionThumbForce</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,30" id="srcline30"> 30</a></span><span class="line">    <span class="var type0" id="S44T0U124">xDoubleDot</span> = <span class="var type0" id="S39T0U126"><span class="message error" id="M6F1C">GeneralCoordinatesDoubleDot</span></span>(1);</span></span>
<span class="srcline"><span class="lineno"><a href="1,31" id="srcline31"> 31</a></span><span class="line">    <span class="var type0" id="S45T0U130">yDoubleDot</span> = <span class="var type0" id="S39T0U132"><span class="message error" id="M7F1C">GeneralCoordinatesDoubleDot</span></span>(2);</span></span>
<span class="srcline"><span class="lineno"><a href="1,32" id="srcline32"> 32</a></span><span class="line">    <span class="var type0" id="S46T0U136">angleDoubleDot</span> = <span class="var type0" id="S39T0U138"><span class="message error" id="M8F1C">GeneralCoordinatesDoubleDot</span></span>(3);</span></span>
<span class="srcline"><span class="lineno"><a href="1,33" id="srcline33"> 33</a></span><span class="line">    <span class="mxinfo " id="T5:U38"><span class="var type1" id="S47T5U142">Positions</span> = <span class="mxinfo " id="T5:U40"><span class="fcn" id="F3N4:B144">PosCalculation</span>(<span class="var type1" id="S15T2U145">angle</span>,<span class="var type1" id="S13T2U146">xPositionG3</span>,<span class="var type1" id="S14T2U147">yPositionG3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,34" id="srcline34"> 34</a></span><span class="line">    <span class="mxinfo " id="T5:U44"><span class="var type1" id="S49T5U150">Velocities</span> = <span class="mxinfo " id="T5:U46"><span class="fcn" id="F15N5:B152">VelCalculation</span> (<span class="var type1" id="S15T2U153">angle</span>,<span class="var type1" id="S12T2U154">angleDot</span>,<span class="var type1" id="S10T2U155">xDotG3</span>,<span class="var type1" id="S11T2U156">yDotG3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,35" id="srcline35"> 35</a></span><span class="line">    <span class="var type0" id="S51T0U159">Accelerations</span> = AccCalculation (<span class="var type1" id="S15T2U162">angle</span>,<span class="var type1" id="S12T2U163">angleDot</span>,<span class="var type0" id="S46T0U164"><span class="message error" id="M9F1C">angleDoubleDot</span></span>,<span class="var type0" id="S44T0U165">xDoubleDot</span>,<span class="var type0" id="S45T0U166">yDoubleDot</span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,36" id="srcline36"> 36</a></span><span class="line">    <span class="var type0" id="S2T0U169">Acce</span>=<span class="var type0" id="S51T0U171"><span class="message error" id="M10F1C">Accelerations</span></span>([1 2 5]);</span></span>
<span class="srcline"><span class="lineno"><a href="1,37" id="srcline37"> 37</a></span><span class="line">    <span class="mxinfo " id="T1:U53"><span class="var type1" id="S3T1U179">Pos</span>=<span class="mxinfo " id="T1:U55"><span class="var type1" id="S47T5U181">Positions</span>(<span class="mxinfo " id="T1:U57">[<span class="mxinfo " id="T2:U58">3</span> <span class="mxinfo " id="T2:U59">4</span>]</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,38" id="srcline38"> 38</a></span><span class="line">    <span class="var type0" id="S4T0U188">ForceReactIndex</span>=<span class="var type0" id="S41T0U190"><span class="message error" id="M11F1C">ForceReactionIndex</span></span>';</span></span>
<span class="srcline"><span class="lineno"><a href="1,39" id="srcline39"> 39</a></span><span class="line">    <span class="var type0" id="S5T0U193">ForceReactThumb</span>=<span class="var type0" id="S43T0U195"><span class="message error" id="M12F1C">ForceReactionThumb</span></span>';</span></span>
<span class="srcline"><span class="lineno"><a href="1,40" id="srcline40"> 40</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
